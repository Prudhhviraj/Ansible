- name: install and run nginx
  hosts: web
  become: yes # -b
  tasks:
  - name: install nginx
    ansible.builtin.package:
      name: nginx
      state: present
  - name: install mysql
    ansible.builtin.package:
      name: mysql
      state: present
  - name: start the nginx
    ansible.builtin.service:
      name: nginx
      state: started
      enabled: yes
  - name: start the mysql
    ansible.builtin.service:
      name: mysql
      state: started
      enabled: yes
  - name: copy nginx config file
    ansible.builtin.copy:
      src: /home/ansible/nginx.conf
      dest: /etc/nginx/nginx.conf
  - name: restart nginx service
    ansible.builtin.service:
      name: nginx
      state: restarted